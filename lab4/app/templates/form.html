{% macro form(user, roles,errors)%}
<form method="POST">
    <div class="mb-3">
      <label for="InputName" class="form-label">Имя</label>
      {%if errors is defined%}
        {%if "name_error" in errors.values()%}
        <input type="text" name='name' class="form-control is-invalid" id="InputName" value={{ user.first_name or ''}}>
        {%for error,error_type in errors.items()%}
          {%if error_type=="name_error"%}
            <span class="text-warning">{{error}}</span>
          {%endif%}
        {%endfor%}
        {%else%}
        <input type="text" name='name' class="form-control " id="InputName" value={{ user.first_name or ''}}>
        {%endif%}
      {%else%}
      <input type="text" name='name' class="form-control " id="InputName" value={{ user.first_name or ''}}>
      {%endif%}
    </div>
    <div class="mb-3">
      <label for="InputLastName" class="form-label">Фамилия</label>
      {%if errors is defined%}
        {%if "second_name_error" in errors.values()%}
          <input type="text" name='lastname' class="form-control is-invalid" id="InputLastName" value={{ user.middle_name or ''}}>
          {%for error,error_type in errors.items()%}
            {%if error_type=="second_name_error"%}
              <span class="text-warning">{{error}}</span>
            {%endif%}
          {%endfor%}
        {%else%}
        <input type="text" name='lastname' class="form-control"id="InputLastName" value={{ user.middle_name or ''}}>
          {%endif%}
      {%else%}
      <input type="text" name='lastname' class="form-control" id="InputLastName" value={{ user.middle_name or ''}}>
      {%endif%}
      </div>
    <div class="mb-3">
        <label for="InputMiddleName" class="form-label">Отчество</label>
        <input type="text" name='middlename' class="form-control" id="InputMiddleName" value={{ user.last_name or ''}}>
    </div>
    {% if request.endpoint == "create_user" %}
    <div class="mb-3">
      <label for="InputLogin" class="form-label">Логин</label>
      {%if errors is defined%}
        {%if "login_error" in errors.values()%}
          <input type="login" name='login' class="form-control is-invalid" id="InputLogin" aria-describedby="emailHelp">
          {%for error,error_type in errors.items()%}
            {%if error_type=="login_error"%}
              <span class="text-warning">{{error}}</span>
            {%endif%}
          {%endfor%}
        {%else%}
          <input type="login" name='login' class="form-control" id="InputLogin" aria-describedby="emailHelp">
        {%endif%}
      {%else%}
          <input type="login" name='login' class="form-control" id="InputLogin" aria-describedby="emailHelp">
      {%endif%} 
    </div>
    <div class="mb-3">
      <label for="InputPassword" class="form-label">Пароль</label>
      {%if errors is defined%}
        {%if "password_error" in errors.values()%}
          <input type="password" name='password'  class="form-control is-invalid" id="InputPassword">
          {%for error,error_type in errors.items()%}
            {%if error_type=="password_error"%}
              <span class="text-warning">{{error}}</span>
            {%endif%}
          {%endfor%}
        {%else%}
          <input type="password" name='password'  class="form-control " id="InputPassword">
        {%endif%}
      {%else%}
        <input type="password" name='password'  class="form-control " id="InputPassword">
      {%endif%}
    </div>
    <div class="mb-3">
        <label for="InputRole" class="form-label">Роль</label>
        <select  name='role'  class="form-control" id="InputRole">
            {% for role in roles %}
                <option value="{{ role.id }}">{{ role.name }}</option>
            {% endfor %}
        </select>
    </div>
    {%endif%}
    {% if request.endpoint == "edit_user" %}
    <div class="mb-3">
      <label for="InputLogin" class="label">Логин</label>
      <p class="form-control">{{ user.login }}</p>
    </div>
    <div class="mb-3">
        <label for="InputRole" class="label">Роль</label>
        <p class="form-control">{{ user.role_name }}</p>
    </div>
    {% endif %}
    <button type="submit" class="btn btn-primary">Отправить</button>
  </form>
  
{% endmacro %}